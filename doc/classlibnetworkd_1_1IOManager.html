<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>libnetworkd: libnetworkd::IOManager Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>libnetworkd</b>::<a class="el" href="classlibnetworkd_1_1IOManager.html">IOManager</a>
  </div>
</div>
<div class="contents">
<h1>libnetworkd::IOManager Class Reference</h1><!-- doxytag: class="libnetworkd::IOManager" --><code>#include &lt;IO.hpp&gt;</code>
<p>
Inherited by libnetworkd::NetworkManager.
<p>

<p>
<a href="classlibnetworkd_1_1IOManager-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibnetworkd_1_1IOManager.html#1eacaf4db738b8df5a8c87b43451104c">waitForEventsAndProcess</a> (uint32_t maxWaitMillis=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibnetworkd_1_1IOManager.html#bf294cb5499f6081bffd4ec381383b34">addSocket</a> (<a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *socket, int fileDescriptor=0)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibnetworkd_1_1IOManager.html#c9ee094f9af78e5ecb13bab534b0b026">removeSocket</a> (<a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *socket)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibnetworkd_1_1IOManager.html#1e3ae96326dca5395a19962e74e9356a">setFileDescriptor</a> (<a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *socket, int fileDescriptor)</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibnetworkd_1_1IOManager.html#62150f59366c451aa49a99ed7e41d3dc">removeMarked</a> ()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Manager for maintaining IO sockets and polling them, can sleep when there is no input to be acted upon. There is usually only one instance of this class or a derived class (e.g. NetworkManager) per process.<p>
A typical use case is an <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> which adds itself to the global <a class="el" href="classlibnetworkd_1_1IOManager.html">IOManager</a> and updates its state with setState, depending on its current buffer situation. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="1eacaf4db738b8df5a8c87b43451104c"></a><!-- doxytag: member="libnetworkd::IOManager::waitForEventsAndProcess" ref="1eacaf4db738b8df5a8c87b43451104c" args="(uint32_t maxWaitMillis=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libnetworkd::IOManager::waitForEventsAndProcess           </td>
          <td>(</td>
          <td class="paramtype">uint32_t&nbsp;</td>
          <td class="paramname"> <em>maxWaitMillis</em> = <code>0</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
waitForEventsAndProcess waits for IO events on registered IOSocket's and notifies these, depending on the IOSocketState they provided. This is usually implemented by a call to poll or a similiar function. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>maxWaitMillis</em>&nbsp;</td><td>Maximum amount of milliseconds to wait until the function returns, even if no event occured. Set to 0 to wait infinitely. This parameter is optional and defaults to 0. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="bf294cb5499f6081bffd4ec381383b34"></a><!-- doxytag: member="libnetworkd::IOManager::addSocket" ref="bf294cb5499f6081bffd4ec381383b34" args="(IOSocket *socket, int fileDescriptor=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libnetworkd::IOManager::addSocket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *&nbsp;</td>
          <td class="paramname"> <em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fileDescriptor</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This functions registers an <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> at the <a class="el" href="classlibnetworkd_1_1IOManager.html">IOManager</a>, optionally initializing the associated file descriptor and the initial socket state. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>socket</em>&nbsp;</td><td>Pointer to the <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> to be added. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fileDescriptor</em>&nbsp;</td><td>File descriptor that is associated with this <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a>. This parameter is optional and can be set later on with <a class="el" href="classlibnetworkd_1_1IOManager.html#1e3ae96326dca5395a19962e74e9356a">IOManager::setFileDescriptor</a>. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns true if the socket was added or false if the socket was alread registered with the <a class="el" href="classlibnetworkd_1_1IOManager.html">IOManager</a>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c9ee094f9af78e5ecb13bab534b0b026"></a><!-- doxytag: member="libnetworkd::IOManager::removeSocket" ref="c9ee094f9af78e5ecb13bab534b0b026" args="(IOSocket *socket)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool libnetworkd::IOManager::removeSocket           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *&nbsp;</td>
          <td class="paramname"> <em>socket</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function unregisters a previously registered <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>socket</em>&nbsp;</td><td>The socket to be unregistered. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True if the socket was unregistered or false if the socket was not previously known to the <a class="el" href="classlibnetworkd_1_1IOManager.html">IOManager</a>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1e3ae96326dca5395a19962e74e9356a"></a><!-- doxytag: member="libnetworkd::IOManager::setFileDescriptor" ref="1e3ae96326dca5395a19962e74e9356a" args="(IOSocket *socket, int fileDescriptor)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libnetworkd::IOManager::setFileDescriptor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> *&nbsp;</td>
          <td class="paramname"> <em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fileDescriptor</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update the file descriptor associated with an <a class="el" href="classlibnetworkd_1_1IOSocket.html">IOSocket</a> and which is going to be poll'ed. This is usually only called once, when the new socket has been added without the optional parameters of addSocket. However, there is no restrictions here, you can change the file descriptor whenever you want. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>socket</em>&nbsp;</td><td>The socket to be updated. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fileDescriptor</em>&nbsp;</td><td>The new file descriptor to be associated. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="62150f59366c451aa49a99ed7e41d3dc"></a><!-- doxytag: member="libnetworkd::IOManager::removeMarked" ref="62150f59366c451aa49a99ed7e41d3dc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void libnetworkd::IOManager::removeMarked           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
remove all sockets in m_removalList from m_socketMap and clear the m_removalList. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>include/libnetworkd/IO.hpp<li>src/IOManager.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Sep 12 03:02:10 2008 for libnetworkd by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
